# Maven pom.xml文件的依赖管理

---

场景

一个项目，划分了多个子模块，如何管理各个子模块的项目依赖？



## 方案一

各个子模块有自己的pom.xml文件，各自单独配置自己的项目依赖。

> 局限：
>
> 1. 如果各个子模块依赖了相同的jar，想升级下这个jar的版本，则每个子模块的pom.xml都需要修改。
> 2. 各个子模块依赖相同的jar，但是jar的版本却不一致



## 方案二

采用父子pom文件形式，对于大家需要公共依赖的jar，统一在父pom中配置dependency。

子模块依赖父pom，会自动继承依赖关系，不需要自己再配置相应的依赖了（当然非公共依赖还是需要配置的）。

> 优点：
>
> 1. 公共的依赖，统一管理，且版本也是统一的。将入口集中，不会出现版本不一致的情况。
> 2. 子模块不需要再配置公共依赖。
>
> 局限：
>
> 假设有5个子模块，其中2个模块需要依赖A.jar。
>
> 如果将A.jar配置在父pom中，可以实现统一管理，但同时其他3个模块也会自动依赖了这个其实并不需要的A.jar，到时依赖过多。



## 方案三

采用父子pom形式，并采用dependencymanagement。

方案二的缺陷是对于部分模块的公共依赖，管理不够灵活。

* dependencymanagement也可实现父pom统一管理jar，统一jar版本

* 子pom如果需要依赖某个jar，只需声明dependency，不需指明version，maven会自动从dependencymanagement里找。

* 如果子pom没声明某个jar，即使这个jar在dependencymanagement里，也不会给子pom添加这个依赖

* 子pom如果想使用其他版本jar，只需指明version即可，此时会屏蔽父pom中的对应jar

> 优点：
>
> 1. 即实现了统一管理jar，统一管理版本
> 2. 也灵活地支持子模块对依赖的自主选择，避免了子模块依赖无关jar





